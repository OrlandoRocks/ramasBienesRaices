{"ast":null,"code":"import _regeneratorRuntime from \"/Users/it/webstorm_projects/VueProjects/ramasBienesRaices/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/it/webstorm_projects/VueProjects/ramasBienesRaices/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Users/it/webstorm_projects/VueProjects/ramasBienesRaices/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"/Users/it/webstorm_projects/VueProjects/ramasBienesRaices/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _Select2 from \"element-ui/lib/theme-chalk/select.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Select from \"element-ui/lib/select\";\nimport _Option2 from \"element-ui/lib/theme-chalk/option.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Option from \"element-ui/lib/option\";\nimport _DatePicker2 from \"element-ui/lib/theme-chalk/date-picker.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _DatePicker from \"element-ui/lib/date-picker\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport { extend } from \"vee-validate\";\nimport { required, double, regex, confirmed, email } from \"vee-validate/dist/rules\";\nimport { mapActions, mapGetters } from \"vuex\";\nimport { ImageUpload } from \"src/components/index\";\nimport locationData from \"@/assets/locations_mexico.json\";\nextend(\"required\", required);\nextend(\"email\", email);\nextend(\"double\", double);\nextend(\"regex\", regex);\nextend(\"confirmed\", confirmed);\nexport default {\n  name: \"ClientForm\",\n  components: _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _DatePicker.name, _DatePicker), _Option.name, _Option), _Select.name, _Select), \"ImageUpload\", ImageUpload),\n  computed: _objectSpread({}, mapGetters([\"getClientById\"])),\n  data: function data() {\n    return {\n      full_name: \"\",\n      states: Object.keys(locationData),\n      cities: locationData[\"Chihuahua\"],\n      images: {\n        regular: null,\n        avatar: null\n      },\n      code: \"\",\n      email: \"\",\n      rfc: \"\",\n      phone_number: \"\",\n      birthday: \"\",\n      address: \"\",\n      zip_code: \"\",\n      civil_status: \"\",\n      state: \"Chihuahua\",\n      city: \"Cuauhtemoc\",\n      image: \"\",\n      lands: [],\n      isSubmitting: false\n    };\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions([\"createClient\", \"fetchLands\", \"getPresignedUrl\", \"uploadFileToS3\"])), {}, {\n    updateCities: function updateCities() {\n      this.cities = locationData[this.state];\n      this.city = \"\";\n    },\n    submit: function submit() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var imageFile;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.isSubmitting = true;\n              imageFile = _this.image;\n              _this.$store.dispatch(\"s3/getPresignedUrl\", _this.image.name).then(function (presignedUrl) {\n                _this.$store.dispatch(\"s3/uploadFileToS3\", {\n                  url: presignedUrl.url,\n                  file: imageFile\n                }).then(function (response) {\n                  console.log(response);\n                  _this.image = response.config.url;\n                  _this.createClient({\n                    full_name: _this.full_name,\n                    code: _this.code,\n                    email: _this.email,\n                    phone_number: _this.phone_number,\n                    birthday: _this.birthday,\n                    image: _this.image,\n                    rfc: _this.rfc,\n                    address: _this.address,\n                    zip_code: _this.zip_code,\n                    civil_status: _this.civil_status,\n                    state: _this.state,\n                    city: _this.city\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n              }).catch(function (error) {\n                console.log(error);\n              });\n              // await this.createClient({\n              //   full_name: this.full_name,\n              //   code: this.code,\n              //   email: this.email,\n              //   phone: this.phone,\n              //   birthday: this.birthday,\n              //   image: this.image,\n              // });\n              _this.isSubmitting = false;\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    onImageChange: function onImageChange(file) {\n      this.images.regular = file;\n      this.image = file;\n    },\n    goToClients: function goToClients() {\n      this.$router.push({\n        name: \"Clients\"\n      });\n    }\n  })\n};","map":{"version":3,"names":["extend","required","double","regex","confirmed","email","mapActions","mapGetters","ImageUpload","locationData","name","components","_defineProperty","_DatePicker","_Option","_Select","computed","_objectSpread","data","full_name","states","Object","keys","cities","images","regular","avatar","code","rfc","phone_number","birthday","address","zip_code","civil_status","state","city","image","lands","isSubmitting","methods","updateCities","submit","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","imageFile","wrap","_callee$","_context","prev","next","$store","dispatch","then","presignedUrl","url","file","response","console","log","config","createClient","catch","error","stop","onImageChange","goToClients","$router","push"],"sources":["src/pages/Clients/ClientForm.vue"],"sourcesContent":["<template>\n  <div class=\"col-md-12\">\n    <ValidationObserver v-slot=\"{ handleSubmit }\">\n      <form class=\"form-horizontal\" @submit.prevent=\"handleSubmit(submit)\">\n        <card>\n          <h4 slot=\"header\" class=\"card-title clickable\" @click=\"goToClients\">\n            <i class=\"tim-icons icon-minimal-left\"></i>\n            Clientes\n          </h4>\n          <div>\n            <div class=\"row\">\n              <label class=\"col-sm-2 col-form-label\">Nombre Completo:</label>\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"nombre completo\"\n                  rules=\"required\"\n                  v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                    v-model=\"full_name\"\n                    :error=\"errors[0]\"\n                    :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n              <label class=\"col-sm-2 col-form-label\">RFC:</label>\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"rfc\"\n                  rules=\"required\"\n                  v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                    v-model=\"rfc\"\n                    :error=\"errors[0]\"\n                    :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <label class=\"col-sm-2 col-form-label\">Email:</label>\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"email\"\n                  rules=\"\"\n                  v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                    v-model=\"email\"\n                    :error=\"errors[0]\"\n                    :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n\n              <label class=\"col-sm-2 col-form-label\">Telefono:</label>\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"telefono\"\n                  rules=\"required\"\n                  v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                    v-model=\"phone_number\"\n                    :error=\"errors[0]\"\n                    :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <label class=\"col-sm-2 col-form-label\"\n                >Fecha de Nacimiento:</label\n              >\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"bithday\"\n                >\n                  <base-input>\n                    <el-date-picker\n                      type=\"date\"\n                      placeholder=\"Fecha de Nacimiento\"\n                      v-model=\"birthday\"\n                    >\n                    </el-date-picker>\n                  </base-input>\n                </ValidationProvider>\n              </div>\n              <label class=\"col-sm-2 col-form-label\">Codigo:</label>\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"codigo\"\n                  v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                    v-model=\"code\"\n                    :error=\"errors[0]\"\n                    :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <label class=\"col-sm-2 col-form-label\"\n              >Direcci√≥n:</label\n              >\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"direccion\"\n                  v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                    v-model=\"address\"\n                    :error=\"errors[0]\"\n                    :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n              <label class=\"col-sm-2 col-form-label\">Codigo Postal:</label>\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                  name=\"codigo\"\n                  v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                    v-model=\"zip_code\"\n                    :error=\"errors[0]\"\n                    :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <label class=\"col-sm-2 col-form-label\">Estado:</label>\n              <div class=\"col-sm-4\">\n                <el-select\n                  class=\"select-primary\"\n                  style=\"width: 100%; margin-bottom: 10px\"\n                  size=\"large\"\n                  placeholder=\"Seleccionar Estado...\"\n                  v-model=\"state\"\n                  @change=\"updateCities\"\n                >\n                  <el-option\n                    v-for=\"option in states\"\n                    class=\"select-primary\"\n                    :value=\"option\"\n                    :label=\"option\"\n                    :key=\"option\"\n                  >\n                  </el-option>\n                </el-select>\n              </div>\n              <label class=\"col-sm-2 col-form-label\">Ciudad:</label>\n              <div class=\"col-sm-4\">\n                <el-select\n                  class=\"select-primary\"\n                  style=\"width: 100%; margin-bottom: 10px\"\n                  size=\"large\"\n                  placeholder=\"Seleccionar Ciudad...\"\n                  v-model=\"city\"\n                >\n                  <el-option\n                    v-for=\"option in cities\"\n                    class=\"select-primary\"\n                    :value=\"option\"\n                    :label=\"option\"\n                    :key=\"option\"\n                  >\n                  </el-option>\n                </el-select>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <label class=\"col-sm-2 col-form-label\">Estado Civil:</label\n              >\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                    name=\"estado civil\"\n                    v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                      v-model=\"civil_status\"\n                      :error=\"errors[0]\"\n                      :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n              <label class=\"col-sm-2 col-form-label\">Codigo Postal:</label>\n              <div class=\"col-sm-4\">\n                <ValidationProvider\n                    name=\"codigo\"\n                    v-slot=\"{ passed, failed, errors }\"\n                >\n                  <base-input\n                      v-model=\"zip_code\"\n                      :error=\"errors[0]\"\n                      :class=\"[\n                      { 'has-success': passed },\n                      { 'has-danger': failed },\n                    ]\"\n                  ></base-input>\n                </ValidationProvider>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <label class=\"col-sm-2 col-form-label\">Credencial:</label>\n              <div class=\"col-sm-7\">\n                <image-upload\n                  @change=\"onImageChange\"\n                  select-text=\"Seleccionar Imagen\"\n                />\n              </div>\n            </div>\n\n            <div class=\"text-center\">\n              <base-button\n                :disabled=\"isSubmitting\"\n                native-type=\"submit\"\n                type=\"primary\"\n                >Crear Cliente</base-button\n              >\n            </div>\n          </div>\n        </card>\n        <div>{{ image }}</div>\n      </form>\n    </ValidationObserver>\n  </div>\n</template>\n\n<script>\nimport { extend } from \"vee-validate\";\nimport {\n  required,\n  double,\n  regex,\n  confirmed,\n  email,\n} from \"vee-validate/dist/rules\";\nimport { DatePicker, Select, Option } from \"element-ui\";\nimport { mapActions, mapGetters } from \"vuex\";\nimport { ImageUpload } from \"src/components/index\";\nimport locationData from \"@/assets/locations_mexico.json\";\n\nextend(\"required\", required);\nextend(\"email\", email);\nextend(\"double\", double);\nextend(\"regex\", regex);\nextend(\"confirmed\", confirmed);\n\nexport default {\n  name: \"ClientForm\",\n  components: {\n    [DatePicker.name]: DatePicker,\n    [Option.name]: Option,\n    [Select.name]: Select,\n    ImageUpload,\n  },\n  computed: {\n    ...mapGetters([\"getClientById\"]),\n  },\n  data() {\n    return {\n      full_name: \"\",\n      states: Object.keys(locationData),\n      cities: locationData[\"Chihuahua\"],\n      images: {\n        regular: null,\n        avatar: null,\n      },\n      code: \"\",\n      email: \"\",\n      rfc: \"\",\n      phone_number: \"\",\n      birthday: \"\",\n      address: \"\",\n      zip_code: \"\",\n      civil_status: \"\",\n      state: \"Chihuahua\",\n      city: \"Cuauhtemoc\",\n      image: \"\",\n      lands: [],\n      isSubmitting: false,\n    };\n  },\n  methods: {\n    ...mapActions([\n      \"createClient\",\n      \"fetchLands\",\n      \"getPresignedUrl\",\n      \"uploadFileToS3\",\n    ]),\n\n    updateCities() {\n      this.cities = locationData[this.state];\n      this.city = \"\";\n    },\n\n    async submit() {\n      this.isSubmitting = true;\n      const imageFile = this.image;\n      this.$store\n        .dispatch(\"s3/getPresignedUrl\", this.image.name)\n        .then((presignedUrl) => {\n          this.$store\n            .dispatch(\"s3/uploadFileToS3\", {\n              url: presignedUrl.url,\n              file: imageFile,\n            })\n            .then((response) => {\n              console.log(response);\n              this.image = response.config.url;\n              this.createClient({\n                full_name: this.full_name,\n                code: this.code,\n                email: this.email,\n                phone_number: this.phone_number,\n                birthday: this.birthday,\n                image: this.image,\n                rfc: this.rfc,\n                address: this.address,\n                zip_code: this.zip_code,\n                civil_status: this.civil_status,\n                state: this.state,\n                city: this.city,\n              });\n            })\n            .catch((error) => {\n              console.log(error);\n            });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      // await this.createClient({\n      //   full_name: this.full_name,\n      //   code: this.code,\n      //   email: this.email,\n      //   phone: this.phone,\n      //   birthday: this.birthday,\n      //   image: this.image,\n      // });\n      this.isSubmitting = false;\n    },\n    onImageChange(file) {\n      this.images.regular = file;\n      this.image = file;\n    },\n    goToClients() {\n      this.$router.push({ name: \"Clients\" });\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n.clickable {\n  cursor: pointer;\n}\n.clickable:hover {\n  color: #e14eca !important;\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;AAuQA,SAAAA,MAAA;AACA,SACAC,QAAA,EACAC,MAAA,EACAC,KAAA,EACAC,SAAA,EACAC,KAAA,QACA;AAEA,SAAAC,UAAA,EAAAC,UAAA;AACA,SAAAC,WAAA;AACA,OAAAC,YAAA;AAEAT,MAAA,aAAAC,QAAA;AACAD,MAAA,UAAAK,KAAA;AACAL,MAAA,WAAAE,MAAA;AACAF,MAAA,UAAAG,KAAA;AACAH,MAAA,cAAAI,SAAA;AAEA;EACAM,IAAA;EACAC,UAAA,EAAAC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACAC,WAAA,CAAAH,IAAA,EAAAG,WAAA,GACAC,OAAA,CAAAJ,IAAA,EAAAI,OAAA,GACAC,OAAA,CAAAL,IAAA,EAAAK,OAAA,kBACAP,WAAA,CACA;EACAQ,QAAA,EAAAC,aAAA,KACAV,UAAA,oBACA;EACAW,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,MAAA,EAAAC,MAAA,CAAAC,IAAA,CAAAb,YAAA;MACAc,MAAA,EAAAd,YAAA;MACAe,MAAA;QACAC,OAAA;QACAC,MAAA;MACA;MACAC,IAAA;MACAtB,KAAA;MACAuB,GAAA;MACAC,YAAA;MACAC,QAAA;MACAC,OAAA;MACAC,QAAA;MACAC,YAAA;MACAC,KAAA;MACAC,IAAA;MACAC,KAAA;MACAC,KAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA,EAAAtB,aAAA,CAAAA,aAAA,KACAX,UAAA,EACA,gBACA,cACA,mBACA,iBACA;IAEAkC,YAAA,WAAAA,aAAA;MACA,KAAAjB,MAAA,GAAAd,YAAA,MAAAyB,KAAA;MACA,KAAAC,IAAA;IACA;IAEAM,MAAA,WAAAA,OAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,SAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAV,KAAA,CAAAJ,YAAA;cACAS,SAAA,GAAAL,KAAA,CAAAN,KAAA;cACAM,KAAA,CAAAW,MAAA,CACAC,QAAA,uBAAAZ,KAAA,CAAAN,KAAA,CAAA1B,IAAA,EACA6C,IAAA,WAAAC,YAAA;gBACAd,KAAA,CAAAW,MAAA,CACAC,QAAA;kBACAG,GAAA,EAAAD,YAAA,CAAAC,GAAA;kBACAC,IAAA,EAAAX;gBACA,GACAQ,IAAA,WAAAI,QAAA;kBACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA;kBACAjB,KAAA,CAAAN,KAAA,GAAAuB,QAAA,CAAAG,MAAA,CAAAL,GAAA;kBACAf,KAAA,CAAAqB,YAAA;oBACA5C,SAAA,EAAAuB,KAAA,CAAAvB,SAAA;oBACAQ,IAAA,EAAAe,KAAA,CAAAf,IAAA;oBACAtB,KAAA,EAAAqC,KAAA,CAAArC,KAAA;oBACAwB,YAAA,EAAAa,KAAA,CAAAb,YAAA;oBACAC,QAAA,EAAAY,KAAA,CAAAZ,QAAA;oBACAM,KAAA,EAAAM,KAAA,CAAAN,KAAA;oBACAR,GAAA,EAAAc,KAAA,CAAAd,GAAA;oBACAG,OAAA,EAAAW,KAAA,CAAAX,OAAA;oBACAC,QAAA,EAAAU,KAAA,CAAAV,QAAA;oBACAC,YAAA,EAAAS,KAAA,CAAAT,YAAA;oBACAC,KAAA,EAAAQ,KAAA,CAAAR,KAAA;oBACAC,IAAA,EAAAO,KAAA,CAAAP;kBACA;gBACA,GACA6B,KAAA,WAAAC,KAAA;kBACAL,OAAA,CAAAC,GAAA,CAAAI,KAAA;gBACA;cACA,GACAD,KAAA,WAAAC,KAAA;gBACAL,OAAA,CAAAC,GAAA,CAAAI,KAAA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACAvB,KAAA,CAAAJ,YAAA;YAAA;YAAA;cAAA,OAAAY,QAAA,CAAAgB,IAAA;UAAA;QAAA,GAAApB,OAAA;MAAA;IACA;IACAqB,aAAA,WAAAA,cAAAT,IAAA;MACA,KAAAlC,MAAA,CAAAC,OAAA,GAAAiC,IAAA;MACA,KAAAtB,KAAA,GAAAsB,IAAA;IACA;IACAU,WAAA,WAAAA,YAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAA5D,IAAA;MAAA;IACA;EAAA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}