{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport axios from \"axios\";\nimport router from \"@/router/router\";\n\n//const BASE_URL = \"http://localhost:3000/\";\nvar BASE_URL = process.env.VUE_APP_BACKEND_URL;\nvar state = {\n  auth_token: null,\n  errors: null,\n  user: {\n    id: null,\n    name: null,\n    last_name: null,\n    email: null\n  },\n  users: []\n};\nvar getters = {\n  getAuthToken: function getAuthToken(state) {\n    return state.auth_token;\n  },\n  getUserEmail: function getUserEmail(state) {\n    var _state$user;\n    return (_state$user = state.user) === null || _state$user === void 0 ? void 0 : _state$user.email;\n  },\n  getUserName: function getUserName(state) {\n    var _state$user2, _state$user3;\n    return ((_state$user2 = state.user) === null || _state$user2 === void 0 ? void 0 : _state$user2.name) + \" \" + ((_state$user3 = state.user) === null || _state$user3 === void 0 ? void 0 : _state$user3.last_name);\n  },\n  getUserID: function getUserID(state) {\n    var _state$user4;\n    return (_state$user4 = state.user) === null || _state$user4 === void 0 ? void 0 : _state$user4.id;\n  },\n  getError: function getError(state) {\n    return state.errors;\n  },\n  isLoggedIn: function isLoggedIn(state) {\n    var loggedOut = state.auth_token == null || state.auth_token == JSON.stringify(null);\n    return !loggedOut;\n  }\n};\nvar actions = {\n  registerUser: function registerUser(_ref, payload) {\n    var commit = _ref.commit;\n    return new Promise(function (resolve, reject) {\n      axios.post(\"\".concat(BASE_URL, \"/signup\"), payload).then(function (response) {\n        commit(\"setUserInfo\", response);\n        router.push(\"/dashboard\");\n        resolve(response);\n      }).catch(function (error) {\n        commit(\"setError\", error);\n        reject(error);\n      });\n    });\n  },\n  loginUser: function loginUser(_ref2, payload) {\n    var commit = _ref2.commit;\n    return new Promise(function (resolve, reject) {\n      axios.post(\"\".concat(BASE_URL, \"/login\"), payload).then(function (response) {\n        console.log(response);\n        commit(\"setUserInfo\", response);\n        resolve(response);\n      }).catch(function (error) {\n        commit(\"setError\", error);\n        reject(error);\n      });\n    });\n  },\n  logoutUser: function logoutUser(_ref3) {\n    var commit = _ref3.commit;\n    var config = {\n      headers: {\n        Authorization: state.auth_token\n      }\n    };\n    return new Promise(function (resolve, reject) {\n      axios.post(\"\".concat(BASE_URL, \"/logout\"), {}, config).then(function () {\n        commit(\"resetUserInfo\");\n        resolve();\n      }).catch(function (error) {\n        commit(\"setError\", error);\n        reject(error);\n      });\n    });\n  },\n  loginUserWithToken: function loginUserWithToken(_ref4, payload) {\n    var commit = _ref4.commit;\n    var config = {\n      headers: {\n        Authorization: payload.auth_token\n      }\n    };\n    return new Promise(function (resolve, reject) {\n      axios.get(\"\".concat(BASE_URL, \"/member-data\"), config).then(function (response) {\n        commit(\"setUserInfoFromToken\", response);\n        resolve(response);\n      }).catch(function (error) {\n        commit(\"setError\", error);\n        reject(error);\n      });\n    });\n  },\n  listUsers: function listUsers(_ref5) {\n    var commit = _ref5.commit;\n    var config = {\n      headers: {\n        Authorization: state.auth_token\n      }\n    };\n    return new Promise(function (resolve, reject) {\n      axios.get(\"\".concat(BASE_URL, \"/users\"), config).then(function (response) {\n        commit(\"setUsers\", response);\n        resolve(response);\n      }).catch(function (error) {\n        commit(\"setError\", error);\n        reject(error);\n      });\n    });\n  }\n};\nvar mutations = {\n  setUserInfo: function setUserInfo(state, data) {\n    state.user = data.data.data.attributes;\n    state.user.last_name = data.data.data.attributes[\"last-name\"];\n    state.auth_token = data.data.meta.token;\n    axios.defaults.headers.common[\"Authorization\"] = state.auth_token;\n    localStorage.setItem(\"auth_token\", state.auth_token);\n  },\n  setError: function setError(state, error) {\n    state.errors = error;\n  },\n  setUserInfoFromToken: function setUserInfoFromToken(state, data) {\n    state.user = data.data.data.attributes;\n    state.user.last_name = data.data.data.attributes[\"last-name\"];\n    state.auth_token = localStorage.getItem(\"auth_token\");\n  },\n  resetUserInfo: function resetUserInfo(state) {\n    state.user = {\n      id: null,\n      name: null,\n      last_name: null,\n      email: null\n    };\n    state.auth_token = null;\n    localStorage.removeItem(\"auth_token\");\n    axios.defaults.headers.common[\"Authorization\"] = null;\n    router.push({\n      name: \"Login\"\n    });\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};","map":{"version":3,"names":["axios","router","BASE_URL","process","env","VUE_APP_BACKEND_URL","state","auth_token","errors","user","id","name","last_name","email","users","getters","getAuthToken","getUserEmail","_state$user","getUserName","_state$user2","_state$user3","getUserID","_state$user4","getError","isLoggedIn","loggedOut","JSON","stringify","actions","registerUser","_ref","payload","commit","Promise","resolve","reject","post","concat","then","response","push","catch","error","loginUser","_ref2","console","log","logoutUser","_ref3","config","headers","Authorization","loginUserWithToken","_ref4","get","listUsers","_ref5","mutations","setUserInfo","data","attributes","meta","token","defaults","common","localStorage","setItem","setError","setUserInfoFromToken","getItem","resetUserInfo","removeItem"],"sources":["/Users/it/webstorm_projects/VueProjects/ramas_bienes_raices/src/store/modules/session_manager.js"],"sourcesContent":["import axios from \"axios\";\nimport router from \"@/router/router\";\n\n//const BASE_URL = \"http://localhost:3000/\";\nconst BASE_URL = process.env.VUE_APP_BACKEND_URL;\n\nconst state = {\n  auth_token: null,\n  errors: null,\n  user: {\n    id: null,\n    name: null,\n    last_name: null,\n    email: null,\n  },\n  users: [],\n};\nconst getters = {\n  getAuthToken(state) {\n    return state.auth_token;\n  },\n  getUserEmail(state) {\n    return state.user?.email;\n  },\n  getUserName(state) {\n    return state.user?.name + \" \" + state.user?.last_name;\n  },\n  getUserID(state) {\n    return state.user?.id;\n  },\n  getError(state) {\n    return state.errors;\n  },\n  isLoggedIn(state) {\n    const loggedOut =\n      state.auth_token == null || state.auth_token == JSON.stringify(null);\n    return !loggedOut;\n  },\n};\nconst actions = {\n  registerUser({ commit }, payload) {\n    return new Promise((resolve, reject) => {\n      axios\n        .post(`${BASE_URL}/signup`, payload)\n        .then((response) => {\n          commit(\"setUserInfo\", response);\n          router.push(\"/dashboard\");\n          resolve(response);\n        })\n        .catch((error) => {\n          commit(\"setError\", error);\n          reject(error);\n        });\n    });\n  },\n  loginUser({ commit }, payload) {\n    return new Promise((resolve, reject) => {\n      axios\n        .post(`${BASE_URL}/login`, payload)\n        .then((response) => {\n          console.log(response);\n          commit(\"setUserInfo\", response);\n          resolve(response);\n        })\n        .catch((error) => {\n          commit(\"setError\", error);\n          reject(error);\n        });\n    });\n  },\n  logoutUser({ commit }) {\n    const config = {\n      headers: {\n        Authorization: state.auth_token,\n      },\n    };\n    return new Promise((resolve, reject) => {\n      axios\n        .post(`${BASE_URL}/logout`, {}, config)\n        .then(() => {\n          commit(\"resetUserInfo\");\n          resolve();\n        })\n        .catch((error) => {\n          commit(\"setError\", error);\n          reject(error);\n        });\n    });\n  },\n  loginUserWithToken({ commit }, payload) {\n    const config = {\n      headers: {\n        Authorization: payload.auth_token,\n      },\n    };\n    return new Promise((resolve, reject) => {\n      axios\n        .get(`${BASE_URL}/member-data`, config)\n        .then((response) => {\n          commit(\"setUserInfoFromToken\", response);\n          resolve(response);\n        })\n        .catch((error) => {\n          commit(\"setError\", error);\n          reject(error);\n        });\n    });\n  },\n  listUsers({ commit }) {\n    const config = {\n      headers: {\n        Authorization: state.auth_token,\n      },\n    };\n    return new Promise((resolve, reject) => {\n      axios\n        .get(`${BASE_URL}/users`, config)\n        .then((response) => {\n          commit(\"setUsers\", response);\n          resolve(response);\n        })\n        .catch((error) => {\n          commit(\"setError\", error);\n          reject(error);\n        });\n    });\n  },\n};\nconst mutations = {\n  setUserInfo(state, data) {\n    state.user = data.data.data.attributes;\n    state.user.last_name = data.data.data.attributes[\"last-name\"];\n    state.auth_token = data.data.meta.token;\n    axios.defaults.headers.common[\"Authorization\"] = state.auth_token;\n    localStorage.setItem(\"auth_token\", state.auth_token);\n  },\n  setError(state, error) {\n    state.errors = error;\n  },\n  setUserInfoFromToken(state, data) {\n    state.user = data.data.data.attributes;\n    state.user.last_name = data.data.data.attributes[\"last-name\"];\n    state.auth_token = localStorage.getItem(\"auth_token\");\n  },\n  resetUserInfo(state) {\n    state.user = {\n      id: null,\n      name: null,\n      last_name: null,\n      email: null,\n    };\n    state.auth_token = null;\n    localStorage.removeItem(\"auth_token\");\n    axios.defaults.headers.common[\"Authorization\"] = null;\n    router.push({ name: \"Login\" });\n  },\n};\nexport default {\n  state,\n  getters,\n  actions,\n  mutations,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}