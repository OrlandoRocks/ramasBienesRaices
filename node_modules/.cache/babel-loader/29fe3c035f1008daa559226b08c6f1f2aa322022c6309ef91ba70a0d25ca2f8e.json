{"ast":null,"code":"import \"/Users/it/webstorm_projects/VueProjects/ramas_bienes_raices/node_modules/core-js/modules/es.array.iterator.js\";\nimport \"/Users/it/webstorm_projects/VueProjects/ramas_bienes_raices/node_modules/core-js/modules/es.promise.js\";\nimport \"/Users/it/webstorm_projects/VueProjects/ramas_bienes_raices/node_modules/core-js/modules/es.object.assign.js\";\nimport \"/Users/it/webstorm_projects/VueProjects/ramas_bienes_raices/node_modules/core-js/modules/es.promise.finally.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport RouterPrefetch from \"vue-router-prefetch\";\nimport DashboardPlugin from \"./plugins/dashboard-plugin\";\nimport App from \"./App.vue\";\nimport router from \"./router/router\";\nimport store from \"./store\";\nimport i18n from \"./i18n\";\nimport \"./registerServiceWorker\";\nVue.config.productionTip = false;\nVue.use(DashboardPlugin);\nVue.use(VueRouter);\nVue.use(RouterPrefetch);\nnew Vue({\n  el: \"#app\",\n  render: function render(h) {\n    return h(App);\n  },\n  router: router,\n  i18n: i18n,\n  store: store\n});\nvar localAuthToken = localStorage.getItem(\"auth_token\");\nconsole.log(router.options.routes);\nif (localAuthToken && localAuthToken !== \"undefined\") {\n  var payload = localAuthToken.split(\".\")[1];\n  var exp = null;\n  if (payload) {\n    try {\n      var decoded = JSON.parse(atob(payload));\n      exp = decoded.exp;\n    } catch (error) {\n      console.error(\"Error decodificando el token:\", error);\n      router.push({\n        name: \"Login\"\n      });\n    }\n  }\n  if (exp) {\n    var now = Math.floor(Date.now() / 1000);\n    if (now > exp) {\n      console.log(\"El token ha expirado.\");\n      localStorage.removeItem(\"auth_token\");\n      router.push({\n        path: \"/login\"\n      });\n    } else {\n      console.log(\"El token es v치lido.\");\n      store.dispatch(\"loginUserWithToken\", {\n        auth_token: localAuthToken\n      });\n    }\n  } else {\n    console.log(\"No se pudo obtener la fecha de expiraci칩n del token.\");\n    router.push({\n      path: \"/login\"\n    });\n  }\n} else {\n  console.log(\"No hay token en localStorage.\");\n  router.push({\n    name: \"Authentication\"\n  });\n}","map":{"version":3,"names":["Vue","VueRouter","RouterPrefetch","DashboardPlugin","App","router","store","i18n","config","productionTip","use","el","render","h","localAuthToken","localStorage","getItem","console","log","options","routes","payload","split","exp","decoded","JSON","parse","atob","error","push","name","now","Math","floor","Date","removeItem","path","dispatch","auth_token"],"sources":["/Users/it/webstorm_projects/VueProjects/ramas_bienes_raices/src/main.js"],"sourcesContent":["import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport RouterPrefetch from \"vue-router-prefetch\";\nimport DashboardPlugin from \"./plugins/dashboard-plugin\";\nimport App from \"./App.vue\";\nimport router from \"./router/router\";\nimport store from \"./store\";\nimport i18n from \"./i18n\";\nimport \"./registerServiceWorker\";\n\nVue.config.productionTip = false;\n\nVue.use(DashboardPlugin);\nVue.use(VueRouter);\nVue.use(RouterPrefetch);\n\nnew Vue({\n  el: \"#app\",\n  render: (h) => h(App),\n  router,\n  i18n,\n  store,\n});\n\nlet localAuthToken = localStorage.getItem(\"auth_token\");\nconsole.log(router.options.routes);\nif (localAuthToken && localAuthToken !== \"undefined\") {\n  const payload = localAuthToken.split(\".\")[1];\n  let exp = null;\n\n  if (payload) {\n    try {\n      const decoded = JSON.parse(atob(payload));\n      exp = decoded.exp;\n    } catch (error) {\n      console.error(\"Error decodificando el token:\", error);\n      router.push({ name: \"Login\" });\n    }\n  }\n\n  if (exp) {\n    const now = Math.floor(Date.now() / 1000);\n    if (now > exp) {\n      console.log(\"El token ha expirado.\");\n      localStorage.removeItem(\"auth_token\");\n      router.push({ path: \"/login\" });\n    } else {\n      console.log(\"El token es v치lido.\");\n      store.dispatch(\"loginUserWithToken\", { auth_token: localAuthToken });\n    }\n  } else {\n    console.log(\"No se pudo obtener la fecha de expiraci칩n del token.\");\n    router.push({ path: \"/login\" });\n  }\n} else {\n  console.log(\"No hay token en localStorage.\");\n  router.push({ name: \"Authentication\" });\n}\n"],"mappings":";;;;;AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,cAAc,MAAM,qBAAqB;AAChD,OAAOC,eAAe,MAAM,4BAA4B;AACxD,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,iBAAiB;AACpC,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAO,yBAAyB;AAEhCP,GAAG,CAACQ,MAAM,CAACC,aAAa,GAAG,KAAK;AAEhCT,GAAG,CAACU,GAAG,CAACP,eAAe,CAAC;AACxBH,GAAG,CAACU,GAAG,CAACT,SAAS,CAAC;AAClBD,GAAG,CAACU,GAAG,CAACR,cAAc,CAAC;AAEvB,IAAIF,GAAG,CAAC;EACNW,EAAE,EAAE,MAAM;EACVC,MAAM,EAAE,SAAAA,OAACC,CAAC;IAAA,OAAKA,CAAC,CAACT,GAAG,CAAC;EAAA;EACrBC,MAAM,EAANA,MAAM;EACNE,IAAI,EAAJA,IAAI;EACJD,KAAK,EAALA;AACF,CAAC,CAAC;AAEF,IAAIQ,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;AACvDC,OAAO,CAACC,GAAG,CAACb,MAAM,CAACc,OAAO,CAACC,MAAM,CAAC;AAClC,IAAIN,cAAc,IAAIA,cAAc,KAAK,WAAW,EAAE;EACpD,IAAMO,OAAO,GAAGP,cAAc,CAACQ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC5C,IAAIC,GAAG,GAAG,IAAI;EAEd,IAAIF,OAAO,EAAE;IACX,IAAI;MACF,IAAMG,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,OAAO,CAAC,CAAC;MACzCE,GAAG,GAAGC,OAAO,CAACD,GAAG;IACnB,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdX,OAAO,CAACW,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrDvB,MAAM,CAACwB,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAQ,CAAC,CAAC;IAChC;EACF;EAEA,IAAIP,GAAG,EAAE;IACP,IAAMQ,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACH,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;IACzC,IAAIA,GAAG,GAAGR,GAAG,EAAE;MACbN,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;MACpCH,YAAY,CAACoB,UAAU,CAAC,YAAY,CAAC;MACrC9B,MAAM,CAACwB,IAAI,CAAC;QAAEO,IAAI,EAAE;MAAS,CAAC,CAAC;IACjC,CAAC,MAAM;MACLnB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MAClCZ,KAAK,CAAC+B,QAAQ,CAAC,oBAAoB,EAAE;QAAEC,UAAU,EAAExB;MAAe,CAAC,CAAC;IACtE;EACF,CAAC,MAAM;IACLG,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;IACnEb,MAAM,CAACwB,IAAI,CAAC;MAAEO,IAAI,EAAE;IAAS,CAAC,CAAC;EACjC;AACF,CAAC,MAAM;EACLnB,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;EAC5Cb,MAAM,CAACwB,IAAI,CAAC;IAAEC,IAAI,EAAE;EAAiB,CAAC,CAAC;AACzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}